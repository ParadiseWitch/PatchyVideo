
<style>
    .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 1000;
        display: none;
        float: left;
        min-width: 160px;
        padding: 5px 0;
        margin: 2px 0 0;
        font-size: 14px;
        text-align: left;
        list-style: none;
        background-color: #fff;
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: 1px solid #ccc;
        border: 1px solid rgba(0, 0, 0, .15);
        border-radius: 4px;
        -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
        box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    }
    .dropdown-menu.pull-right {
        right: 0;
        left: auto;
    }
    .dropdown-menu .divider {
        height: 1px;
        margin: 9px 0;
        overflow: hidden;
        background-color: #e5e5e5;
    }
    .dropdown-menu > li > a {
        display: block;
        padding: 3px 20px;
        clear: both;
        font-weight: normal;
        line-height: 1.42857143;
        color: #333;
        white-space: nowrap;
    }
    .dropdown-menu > li > a:hover,
    .dropdown-menu > li > a:focus {
        color: #262626;
        text-decoration: none;
        background-color: #f5f5f5;
    }
    .dropdown-menu > .active > a,
    .dropdown-menu > .active > a:hover,
    .dropdown-menu > .active > a:focus {
        color: #fff;
        text-decoration: none;
        background-color: #428bca;
        outline: 0;
    }
    .dropdown-menu > .disabled > a,
    .dropdown-menu > .disabled > a:hover,
    .dropdown-menu > .disabled > a:focus {
        color: #777;
    }
    .dropdown-menu > .disabled > a:hover,
    .dropdown-menu > .disabled > a:focus {
        text-decoration: none;
        cursor: not-allowed;
        background-color: transparent;
        background-image: none;
        filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
    }
    .open > .dropdown-menu {
        display: block;
    }
    .open > a {
        outline: 0;
    }
    .dropdown-menu-right {
        right: 0;
        left: auto;
    }
    .dropdown-menu-left {
        right: auto;
        left: 0;
    }
    .active {
        background-color: inherit;
        border-bottom-width: 2px;
        border-bottom-style: solid;
        border-bottom-left-radius: 2px;
        border-bottom-right-radius: 2px;
        border-bottom-color: blue;
        text-align: center;
        color: blue;
    }
</style>
<li id="s1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://zeptojs.com/zepto.min.js"></script>
    <script src="{{ url_for('static',filename='js/jquery.textcomplete.js') }}"></script>
<!--    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">-->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<form id="search-bar" action="/search" method="GET" autocomplete="off">
    <select class="form_select">
        <option value="0">Tags</option>
    </select>
    <input id="search-bar-query" name="query" type="text" placeholder="Search" value="{{query}}">
    <input id="search-bar-submit" type="submit" value="Search">
</form>
<script>
    $('#search-bar-query').textcomplete([
        {
            id: 'tags',
            match: /\b(\w{2,})$/,
            search: function (term, callback) {
                console.log(term);
                $.getJSON( "https://patchyvideo.com/autocomplete/?q=" + term, function( data ) {
                    callback(data);
                });
            },
            template: function (value) {
                if (isEmpty(value.dst))
                {
                    return `<span style="margin-right: 6em;">${value.src}</span><span style="float:right;">${value.count}</span>`;
                } else {
                    return `<span>${value.src}</span>-><span style="margin-right: 6em;">${value.dst}</span><span style="float:right;">${value.count}</span>`;
                }
            },
            replace: function (value) {
                if (isEmpty(value.dst)) {
                    return value.src + '\n';
                } else {
                    return value.dst + '\n';
                }
            },
            index: 1
        }
    ],
    {
        onKeydown: function (e, commands) {
            if (e.ctrlKey && e.keyCode === 74) { // CTRL-J
                return commands.KEY_ENTER;
            }
        }
    });
</script>
</li>